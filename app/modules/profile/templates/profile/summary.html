{% extends "base_template.html" %}

{% block title %}User Profile{% endblock %}

{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
    
    <h1 class="h3 m-0">User profile</h1>
    
    <a href="{{ url_for('profile.view_user_datasets', userId=user.id) }}" class="btn btn-primary">
      Ver Datasets Subidos
    </a>
</div>

<div class="row">

    <div class="col-12 col-md-8 col-lg-6"> 

        <div class="card shadow-sm" > 
            <div class="card-header card-dark"> 
                <h5 class="card-title mb-0" style="color: white; font-size: 15px;">Profile Information</h5>
            </div>
            <div class="card-body">
                <p class="card-text h5"><i class="fa fa-user"></i> <strong>Name:</strong> {{user_profile.name}}</p>
                <p class="card-text h5"><i class="fa fa-user-circle"></i> <strong>Surname:</strong> {{user_profile.surname}}</p>
                <p class="card-text h5"><i class="fa fa-building"></i> <strong>Affiliation:</strong> {{user_profile.affiliation}}</p>
                <p class="card-text h5"><i class="fa fa-id-card"></i> <strong>Orcid:</strong> {{user_profile.orcid}}</p>
                <p class="card-text h5"><i class="fa fa-envelope"></i> <strong>Email:</strong> {{user.email}}</p>
                <p class="card-text h5"><i class="fa fa-database"></i> <strong>Uploaded datasets:</strong> {{ total_datasets }} datasets</p>
            </div>
            
        </div>
    </div>

</div>

<div class="row mt-4">
    <div class="col-12 col-md-6">
        <div class="card shadow-sm h-100">
            <div class="card-header card-dark">
                <h5 class="card-title mb-0" style="color: white; font-size: 15px;">Following Authors</h5>
            </div>
            <div class="card-body">
                {% if followed_authors %}
                    <ul class="list-unstyled mb-0">
                        {% for author in followed_authors %}
                            <li class="mb-2">
                                <a href="{{ url_for('dataset.author_detail', author_id=author.id) }}">
                                    {{ author.name }}
                                </a>
                                {% if author.affiliation %}<small class="text-muted">({{ author.affiliation }})</small>{% endif %}
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-muted mb-0">You are not following any authors yet.</p>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="col-12 col-md-6">
        <div class="card shadow-sm h-100">
            <div class="card-header card-dark">
                <h5 class="card-title mb-0" style="color: white; font-size: 15px;">Following Communities</h5>
            </div>
            <div class="card-body">
                {% if followed_communities %}
                    <ul class="list-unstyled mb-0">
                        {% for community_id in followed_communities %}
                            <li class="mb-2">
                                <a href="{{ url_for('dataset.community_detail', community_id=community_id) }}">
                                    {{ community_id }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-muted mb-0">You are not following any communities yet.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
    <script src="{{ url_for('profile.scripts') }}"></script>
{% endblock %}